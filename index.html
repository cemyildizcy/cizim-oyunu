<!DOCTYPE html>
<html lang="tr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Çizgi Savaşları — Başlangıç</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="page">
		<header class="brand">
			<h1>Çizgi Savaşları</h1>
			<p class="subtitle">İki oyunculu zeka oyunu — önce ızgara boyutunu seçin</p>
		</header>

		<main class="card center-card">
			<label for="gridSizeInput" class="label">Kare Sayısı (NxN)</label>
			<input id="gridSizeInput" type="number" min="3" max="20" value="5" class="input">
			
			<label class="label" style="margin-top: 10px;">Oyun Türü</label>
			<div class="game-mode-selector">
				<button id="typePath" class="mode-btn active">Yol Çizme</button>
				<button id="typeSquare" class="mode-btn">Kare Kapatma</button>
			</div>

            <!-- Oyuncu Modu kaldırıldı, çünkü online modda her zaman iki kişilik olacak -->
			<div id="player-inputs" class="player-inputs" style="margin-top: 20px;">
				<input id="playerName" type="text" placeholder="Oyuncu Adınız" value="Oyuncu 1" class="input">
			</div>

			<div class="online-section" style="margin-top: 20px;">
				<label class="label">Çevrimiçi Oyun</label>
				<div style="display:flex;gap:8px;margin-bottom:12px;align-items:center;justify-content:center">
					<input id="roomInput" type="text" placeholder="Oda Kodu Girin (veya boş bırakın)" class="input" style="width:100%;padding:8px" />
				</div>
			</div>

			<div class="row">
				<button id="startGameBtn" class="btn primary">Oda Oluştur / Katıl</button>
			</div>
			<small class="hint">Arkadaşınla oynamak için aynı Oda Kodunu gir.</small>
		</main>

		<footer class="footer">©Cem YILDIZ tarafından yapılmıştır.</footer>
	</div>

	<script>
		const typePathBtn = document.getElementById('typePath');
		const typeSquareBtn = document.getElementById('typeSquare');

		typePathBtn.addEventListener('click', () => {
			typePathBtn.classList.add('active');
			typeSquareBtn.classList.remove('active');
		});

		typeSquareBtn.addEventListener('click', () => {
			typeSquareBtn.classList.add('active');
			typePathBtn.classList.remove('active');
		});

		document.getElementById('startGameBtn').addEventListener('click', () => {
			const input = document.getElementById('gridSizeInput');
			let v = parseInt(input.value) || 5;
			
			if (v < 3 || v > 20) {
				alert('Lütfen 3 ile 20 arasında bir ızgara boyutu seçin.');
				v = Math.min(Math.max(v, 3), 20);
				input.value = v;
				return;
			}

			const p1 = document.getElementById('playerName').value || 'Oyuncu 1';
			const gameType = typeSquareBtn.classList.contains('active') ? 'square' : 'path';
			
			// Oda kodu al veya oluştur
			let room = (document.getElementById('roomInput').value || '').trim();
			if (!room) {
				// Boş bırakılırsa 6 haneli rastgele bir kod oluştur
				room = Math.random().toString(36).slice(2, 8).toUpperCase();
			}

			// Oyuncuyu oyun sayfasına yönlendir
			window.location.href = `game.html?size=${v}&p1=${encodeURIComponent(p1)}&type=${gameType}&room=${room}`;
		});
	</script>
</body>
</html>
