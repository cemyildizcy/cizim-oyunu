<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="utf-8">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2160219446901494"
        crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>XOX â€” Tic Tac Toe</title>
    <meta name="description" content="Online XOX oyna. ArkadaÅŸÄ±nla veya yapay zekaya karÅŸÄ±!">
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 24px;
        }

        .xox-board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 8px;
        }

        .cell {
            width: 100px;
            height: 100px;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .cell:hover {
            background: var(--bg-hover);
            border-color: var(--neon-cyan);
        }

        .cell.x {
            color: var(--neon-pink);
            text-shadow: 0 0 20px var(--neon-pink);
        }

        .cell.o {
            color: var(--neon-cyan);
            text-shadow: 0 0 20px var(--neon-cyan);
        }

        .cell.win {
            background: rgba(34, 197, 94, 0.2);
            border-color: #22c55e;
            animation: winPulse 0.5s;
        }

        @keyframes winPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .score-board {
            display: flex;
            gap: 24px;
            text-align: center;
        }

        .score-item {
            padding: 16px 32px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
        }

        .score-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .score-value {
            font-size: 32px;
            font-weight: 700;
            margin-top: 4px;
        }

        .score-item.x .score-value {
            color: var(--neon-pink);
        }

        .score-item.o .score-value {
            color: var(--neon-cyan);
        }

        .score-item.draw .score-value {
            color: var(--text-muted);
        }

        .mode-selector {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .page {
            max-width: 500px;
        }
    </style>
</head>

<body>
    <div class="page">
        <header class="game-header">
            <div class="info">
                <h2>XOX</h2>
                <div id="status" class="status">X'in sÄ±rasÄ±</div>
            </div>
            <div class="controls">
                <button class="small-btn" onclick="location.href='../index.html'">Geri</button>
                <button class="small-btn" id="resetGameBtn">Yeniden</button>
            </div>
        </header>

        <div class="game-container">
            <div class="mode-selector">
                <button id="modeAI" class="mode-btn active">Bilgisayara KarÅŸÄ±</button>
                <button id="mode2P" class="mode-btn">2 KiÅŸi</button>
            </div>

            <div class="score-board">
                <div class="score-item x">
                    <div class="score-label">X (Sen)</div>
                    <div class="score-value" id="scoreX">0</div>
                </div>
                <div class="score-item draw">
                    <div class="score-label">Berabere</div>
                    <div class="score-value" id="scoreDraw">0</div>
                </div>
                <div class="score-item o">
                    <div class="score-label">O (AI)</div>
                    <div class="score-value" id="scoreO">0</div>
                </div>
            </div>

            <div id="board" class="xox-board"></div>
        </div>

        <footer class="footer">Â© Cem YILDIZ</footer>
    </div>

    <script>
        const boardEl = document.getElementById('board');
        const statusDiv = document.getElementById('status');
        const resetBtn = document.getElementById('resetGameBtn');
        const scoreXEl = document.getElementById('scoreX');
        const scoreOEl = document.getElementById('scoreO');
        const scoreDrawEl = document.getElementById('scoreDraw');
        const modeAI = document.getElementById('modeAI');
        const mode2P = document.getElementById('mode2P');

        let board = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = 'X';
        let gameOver = false;
        let isSinglePlayer = true;
        let scores = { X: 0, O: 0, draw: 0 };

        const winPatterns = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // Yatay
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // Dikey
            [0, 4, 8], [2, 4, 6]              // Ã‡apraz
        ];

        function init() {
            renderBoard();
            updateStatus();
        }

        function renderBoard() {
            boardEl.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                if (board[i]) {
                    cell.textContent = board[i];
                    cell.classList.add(board[i].toLowerCase());
                }
                cell.addEventListener('click', () => handleClick(i));
                boardEl.appendChild(cell);
            }
        }

        function handleClick(index) {
            if (board[index] || gameOver) return;
            if (isSinglePlayer && currentPlayer === 'O') return;

            makeMove(index);

            if (!gameOver && isSinglePlayer && currentPlayer === 'O') {
                setTimeout(makeAIMove, 500);
            }
        }

        function makeMove(index) {
            board[index] = currentPlayer;
            renderBoard();

            const winner = checkWinner();
            if (winner) {
                endGame(winner);
            } else if (board.every(cell => cell)) {
                endGame('draw');
            } else {
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                updateStatus();
            }
        }

        function checkWinner() {
            for (const pattern of winPatterns) {
                const [a, b, c] = pattern;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    highlightWin(pattern);
                    return board[a];
                }
            }
            return null;
        }

        function highlightWin(pattern) {
            const cells = boardEl.querySelectorAll('.cell');
            pattern.forEach(i => cells[i].classList.add('win'));
        }

        function endGame(result) {
            gameOver = true;
            if (result === 'draw') {
                statusDiv.textContent = 'ðŸ¤ Berabere!';
                scores.draw++;
            } else {
                statusDiv.textContent = `ðŸ† ${result} KazandÄ±!`;
                scores[result]++;
            }
            updateScores();
        }

        function updateStatus() {
            const name = isSinglePlayer
                ? (currentPlayer === 'X' ? 'Senin' : "AI'Ä±n")
                : currentPlayer + "'in";
            statusDiv.textContent = `${name} sÄ±rasÄ±`;
        }

        function updateScores() {
            scoreXEl.textContent = scores.X;
            scoreOEl.textContent = scores.O;
            scoreDrawEl.textContent = scores.draw;
        }

        function resetGame() {
            board = ['', '', '', '', '', '', '', '', ''];
            currentPlayer = 'X';
            gameOver = false;
            renderBoard();
            updateStatus();
        }

        // AI - Minimax
        function makeAIMove() {
            if (gameOver) return;

            const bestMove = minimax(board, 'O').index;
            makeMove(bestMove);
        }

        function minimax(newBoard, player) {
            const emptyCells = newBoard.map((c, i) => c === '' ? i : null).filter(i => i !== null);

            // Terminal durumlar
            if (checkWinnerForBoard(newBoard, 'X')) return { score: -10 };
            if (checkWinnerForBoard(newBoard, 'O')) return { score: 10 };
            if (emptyCells.length === 0) return { score: 0 };

            const moves = [];

            for (const i of emptyCells) {
                const move = { index: i };
                newBoard[i] = player;

                const result = minimax(newBoard, player === 'O' ? 'X' : 'O');
                move.score = result.score;

                newBoard[i] = '';
                moves.push(move);
            }

            let bestMove;
            if (player === 'O') {
                let bestScore = -Infinity;
                for (const move of moves) {
                    if (move.score > bestScore) {
                        bestScore = move.score;
                        bestMove = move;
                    }
                }
            } else {
                let bestScore = Infinity;
                for (const move of moves) {
                    if (move.score < bestScore) {
                        bestScore = move.score;
                        bestMove = move;
                    }
                }
            }

            return bestMove;
        }

        function checkWinnerForBoard(b, player) {
            return winPatterns.some(([a, bc, c]) => b[a] === player && b[bc] === player && b[c] === player);
        }

        // Event Listeners
        resetBtn.addEventListener('click', resetGame);

        modeAI.addEventListener('click', () => {
            modeAI.classList.add('active');
            mode2P.classList.remove('active');
            isSinglePlayer = true;
            resetGame();
        });

        mode2P.addEventListener('click', () => {
            mode2P.classList.add('active');
            modeAI.classList.remove('active');
            isSinglePlayer = false;
            resetGame();
        });

        init();
    </script>
</body>

</html>